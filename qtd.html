<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <title>Quantidade de Holders</title>
</head>
<body>
  <h1>Quantidade de Holders</h1>
  <p id="holders">Carregando...</p>

  <script>
    // URL da página do token na BscScan
    const tokenUrl = 'https://bscscan.com/token/0x893535ED1b5C6969E62a10bABfED4F5fF8373278#balances';
    
    // Proxy do cors-anywhere (precisa ativar em https://cors-anywhere.herokuapp.com/corsdemo)
    const proxyUrl = 'https://cors-anywhere.herokuapp.com/';
    const fetchUrl = proxyUrl + tokenUrl;
    
    fetch(fetchUrl)
      .then(response => {
        if (!response.ok) {
          throw new Error(`HTTP error! status: ${response.status}`);
        }
        return response.text();
      })
      .then(html => {
        // Cria um DOM virtual para analisar o HTML
        const parser = new DOMParser();
        const doc = parser.parseFromString(html, 'text/html');

        // Tenta encontrar um elemento que contenha a palavra "Holders" e, perto dele,
        // o texto com o número de holders, ex: "4,893 addresses".
        let holdersNumber = null;
        const allElements = doc.querySelectorAll('*');
        for (let el of allElements) {
          if (el.textContent.includes('Holders')) {
            // Tenta capturar algo como "4,893 addresses"
            const match = el.textContent.match(/[\d,]+\s+addresses/);
            if (match) {
              holdersNumber = match[0]; // ex.: "4,893 addresses"
              break;
            }
          }
        }

        if (holdersNumber) {
          document.getElementById('holders').innerText = holdersNumber;
        } else {
          document.getElementById('holders').innerText = 'Não foi possível encontrar o número de holders.';
        }
      })
      .catch(error => {
        document.getElementById('holders').innerText = 'Erro: ' + error;
      });
  </script>
</body>
</html>
